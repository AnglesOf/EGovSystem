<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
    <title>智能政务系统</title>
    <meta name="keywords" content="智能政务系统"/>
    <meta name="description" content="智能政务系统"/>

    <link href="../css/css.css" rel="stylesheet"/>
    <link href="../css/app.158927d2966ac2f157d8093f899ab95b.css" rel="stylesheet"/>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/jquery.cookie.js"></script>
    <script type="text/javascript" src="../js/js.js"></script>
</head>

<body style="background:url(../images/bodybg.png);">
<div style="width:100%;height:180px"></div>
<div class="nav">
    <ul>
        <li><a></a></li>
        <li><a href="../index2.html">网站首页</a></li>
        <li><a href="./addMessage.html">留   言</a></li>
        <li><a href="./userMessages.html">我的留言</a></li>
        <li><a href="./dataCountForm.html">数据统计</a></li>
        <li><a href="../login.html" id="login">登录</a></li>
        <li><a href="./register.html" id="register">注册</a></li>
        <li><a></a></li>
        <div class="clears"></div>
    </ul>
</div><!--nav/-->

<div class="cont">
    <div style="display: block;/* text-align: center; */position: relative;left: 27%;margin-top: 3%;;margin-bottom:12%">
        <form action="/EGov/user/modifyPsw" method="post">

            <div style="display: flex;">
                <div class="infoText"><label class="mPText">原密码</label></div>
                <div class="infoInput">
                    <input type="text" id="i1" name="yuanMiMa" value="" placeholder="请输入密码">
                </div>
            </div>

            <div style="display: flex;margin-top: 20px;">
                <div class="infoText"><label class="mPText">修改密码</label></div>
                <div class="infoInput">
                    <input type="text" id="i2" name="password" value="" placeholder="修改密码">
                </div>
            </div>

            <div style="display: flex;margin-top: 20px;">
                <div class="infoText"><label class="mPText">确认修改密码</label></div>
                <div class="infoInput">
                    <input type="text" id="i3" name="password2" value="" placeholder="确认修改密码">
                </div>
            </div>

            <div style="display: flex;margin-top: 20px;text-align: center;">
                <div>
                    <br><br>
                </div>
                <div class="" style="margin-left:15%;">
                    <button class="infoButton" type="submit" onclick="return checkForm();">提交</button>
                    <button class="infoButton" type="reset">重置</button>
                </div>
            </div>
        </form>
    </div>
</div><!--footer/-->

<div class="footer">
    <div class="footBottom">
        <p>Copyright 2022 XX省XX市政府,All right Reserved 版权所有</p>
        <p>未经本网书面授权，请勿转载、摘编或建立镜像，负责视为侵权。 </p>
        <p>沪ICP备0000000号 技术支持：<a href="" target="_blank">xxxx</a></p>
    </div><!--footBottom/-->
</div><!--footer/-->
<script>
    function checkForm(){
        var input1 = document.getElementById('i1');
        var input2 = document.getElementById('i2');
        var input3 = document.getElementById('i3');
        if(input1.value==='' || input2.value==='' || input3.value===''){
            alert("不能为空");
            return false;
        }
        if(input1.value!==$.cookie('userPassword')){
            alert("密码不正确，请重新输入");
            return false;
        }
        if(input2.value!==input3.value){
            alert("修改密码不一致，请重新输入");
            return false;
        }
        changeCookie(input1.value);
        return true;
    }
    function changeCookie(value){
        $.cookie('userPassword', value, {path:"/EGov"});
    }

    function delCookie() {
        $.removeCookie("userId", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userName", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userPhone", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userPassword", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userFlag", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userSex", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userState", {domain: 'localhost', path: '/EGov'});
        $.removeCookie("userSection", {domain: 'localhost', path: '/EGov'});
    }

    function setUserName() {
        var userName = $.cookie('userName');
        if (userName != null) {
            var login = document.getElementById('login');
            login.innerText = '欢迎' + userName;
            login.href = '/userHTML/userInfo.html';
            var register = document.getElementById('register');
            register.innerHTML = '退出登录';
            register.href = "/EGov/index2.html";
            register.onclick = delCookie;
        }
    }
    setUserName();
</script>
</body>
</html>
